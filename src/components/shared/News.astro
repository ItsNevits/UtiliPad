---
import { getCollection } from "astro:content";

interface Props {
  t: any;
  lang: string;
}

const { t, lang } = Astro.props;

const news = await getCollection("news", ({ data }) => !data.draft);
const sortedNews = news.sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<div
  class="rounded-2xl border border-neutral-800 bg-neutral-800/50 select-none"
>
  <div
    class="p-4 border-b border-neutral-700 flex items-center justify-between"
  >
    <h3 class="font-semibold">{t.components.news.title}</h3>
    <a
      title="Ver todas las novedades"
      class="text-neutral-400 text-sm hover:underline"
      href={`/${lang}/news`}>{t.components.news.seeMore}</a
    >
  </div>
  <ul class="p-4 space-y-3 text-sm text-neutral-300">
    {
      sortedNews
        .map((item) => (
          <li class="flex gap-2">
            <a
              href={`/${lang}/news/${item.slug}`}
              class="cursor-pointer mt-1 hover:text-green-400 rounded-full flex gap-2 before:content-['●'] before:text-green-400"
            >
              {item.data.title}
            </a>
          </li>
        ))
        .slice(0, 5)
    }
  </ul>
</div>
