---
import MainLayout from "../Layouts/MainLayout.astro";
import Hero from "../components/shared/Hero.astro";
---

<MainLayout>
  <Hero
    title="Contacto"
    description="¿Tienes una sugerencia, encontraste un error o quieres proponer una nueva herramienta?"
  />

  <div class="mt-5 flex flex-col xl:flex-row gap-5">
    <!-- Información de contacto -->
    <div
      class="overflow-hidden rounded-2xl border border-neutral-800 p-6 space-y-6 flex-1"
    >
      <h2 class="text-xl font-semibold text-neutral-200">
        Información de contacto
      </h2>

      <div class="space-y-4">
        <div class="flex items-center gap-3">
          <div
            class="w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center"
          >
            <span class="text-emerald-400">📧</span>
          </div>
          <div>
            <p class="text-sm text-neutral-400">Email</p>
            <a
              href="mailto:bs.alvarado21@gmail.com"
              class="text-neutral-200 hover:text-emerald-400 transition-colors"
            >
              bs.alvarado21@gmail.com
            </a>
          </div>
        </div>

        <div class="flex items-center gap-3">
          <div
            class="w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center"
          >
            <span class="text-emerald-400">🐙</span>
          </div>
          <div>
            <p class="text-sm text-neutral-400">GitHub</p>
            <a
              href="https://github.com/ItsNevits"
              target="_blank"
              class="text-neutral-200 hover:text-emerald-400 transition-colors"
            >
              https://github.com/ItsNevits
            </a>
          </div>
        </div>

        <div class="flex items-center gap-3">
          <div
            class="w-8 h-8 bg-emerald-500/20 rounded-lg flex items-center justify-center"
          >
            <span class="text-emerald-400">⚡</span>
          </div>
          <div>
            <p class="text-sm text-neutral-400">Tiempo de respuesta</p>
            <p class="text-neutral-200">24-48 horas</p>
          </div>
        </div>
      </div>

      <div class="border-t border-neutral-700 pt-6">
        <h3 class="text-lg font-medium text-neutral-200 mb-3">
          ¿En qué podemos ayudarte?
        </h3>
        <ul class="space-y-2 text-sm text-neutral-400">
          <li>• Reportar errores o bugs</li>
          <li>• Sugerir nuevas herramientas</li>
          <li>• Mejorar herramientas existentes</li>
          <li>• Colaborar en el proyecto</li>
          <li>• Preguntas generales</li>
        </ul>
      </div>
    </div>

    <!-- Formulario de contacto -->
    <div
      class="overflow-hidden rounded-2xl border border-neutral-800 p-6 flex-1"
    >
      <h2 class="text-xl font-semibold text-neutral-200 mb-6">
        Envíanos un mensaje
      </h2>

      <form id="contact-form" class="space-y-4">
        <div>
          <label
            for="name"
            class="block text-sm font-medium text-neutral-300 mb-2"
          >
            Nombre
          </label>
          <input
            type="text"
            id="name"
            name="name"
            required
            class="w-full px-4 py-3 bg-neutral-900/60 border border-neutral-700 rounded-lg text-neutral-200 placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50"
            placeholder="Tu nombre"
          />
        </div>

        <div>
          <label
            for="email"
            class="block text-sm font-medium text-neutral-300 mb-2"
          >
            Email
          </label>
          <input
            type="email"
            id="email"
            name="email"
            required
            class="w-full px-4 py-3 bg-neutral-900/60 border border-neutral-700 rounded-lg text-neutral-200 placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50"
            placeholder="tu@email.com"
          />
        </div>

        <div>
          <label
            for="subject"
            class="block text-sm font-medium text-neutral-300 mb-2"
          >
            Asunto
          </label>
          <select
            id="subject"
            name="subject"
            required
            class="w-full px-4 py-3 bg-neutral-900/60 border border-neutral-700 rounded-lg text-neutral-200 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50"
          >
            <option value="">Selecciona un asunto</option>
            <option value="bug">Reportar error</option>
            <option value="feature">Sugerir herramienta</option>
            <option value="improvement">Mejora existente</option>
            <option value="collaboration">Colaboración</option>
            <option value="other">Otro</option>
          </select>
        </div>

        <div>
          <label
            for="message"
            class="block text-sm font-medium text-neutral-300 mb-2"
          >
            Mensaje
          </label>
          <textarea
            id="message"
            name="message"
            rows="6"
            required
            class="w-full px-4 py-3 bg-neutral-900/60 border border-neutral-700 rounded-lg text-neutral-200 placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50 resize-none"
            placeholder="Describe tu consulta, sugerencia o problema..."
          ></textarea>
        </div>

        <button
          type="submit"
          class="w-full px-6 py-3 bg-emerald-600 hover:bg-emerald-500 text-white font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500/50 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <span id="submit-text">Enviar mensaje</span>
        </button>
      </form>

      <div id="form-status" class="mt-4 text-sm hidden"></div>
    </div>
  </div>

  <!-- FAQ Section -->
  <div class="overflow-hidden rounded-2xl border border-neutral-800 p-6 mt-5">
    <h2 class="text-xl font-semibold text-neutral-200 mb-6">
      Preguntas Frecuentes
    </h2>

    <div class="space-y-4">
      <details class="group">
        <summary
          class="cursor-pointer text-neutral-300 hover:text-neutral-100 font-medium"
        >
          ¿UtiliPad es realmente gratuito?
        </summary>
        <p class="mt-2 text-sm text-neutral-400 pl-4">
          ● Sí, todas las herramientas son completamente gratuitas y sin límites
          de uso. Es un proyecto open source.
        </p>
      </details>

      <details class="group">
        <summary
          class="cursor-pointer text-neutral-300 hover:text-neutral-100 font-medium"
        >
          ¿Mis archivos se envían a algún servidor?
        </summary>
        <p class="mt-2 text-sm text-neutral-400 pl-4">
          ● No, todo el procesamiento se hace en nuesta API open source. <br /> ●
          Tus archivos nunca se envían a ningún servidor. <br /> ● Puedes revisar
          el código en GitHub.
        </p>
      </details>

      <details class="group">
        <summary
          class="cursor-pointer text-neutral-300 hover:text-neutral-100 font-medium"
        >
          ¿Puedo sugerir nuevas herramientas?
        </summary>
        <p class="mt-2 text-sm text-neutral-400 pl-4">
          ¡Por supuesto! Envíanos tus ideas a través del formulario de contacto
          o crea un issue en GitHub.
        </p>
      </details>

      <details class="group">
        <summary
          class="cursor-pointer text-neutral-300 hover:text-neutral-100 font-medium"
        >
          ¿Cómo puedo contribuir al proyecto?
        </summary>
        <p class="mt-2 text-sm text-neutral-400 pl-4">
          ● Puedes contribuir reportando bugs, sugiriendo mejoras.
        </p>
      </details>
    </div>
  </div>
</MainLayout>

<script>
  const form = document.getElementById("contact-form") as HTMLFormElement;
  const submitText = document.getElementById("submit-text") as HTMLElement;
  const formStatus = document.getElementById("form-status") as HTMLElement;
  const submitButton = form.querySelector(
    'button[type="submit"]'
  ) as HTMLButtonElement;

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    // Cambiar estado del botón
    submitButton.disabled = true;
    submitText.textContent = "Enviando...";
    formStatus.classList.add("hidden");

    // Simular envío (aquí integrarías con tu servicio de email)
    try {
      const formData = new FormData(form);
      const data = Object.fromEntries(formData);

      // Aquí irían los datos a tu servicio de email (Formspree, Netlify Forms, etc.)
      console.log("Datos del formulario:", data);

      // Simular delay
      await new Promise((resolve) => setTimeout(resolve, 1500));

      // Mostrar éxito
      formStatus.innerHTML =
        '<span class="text-emerald-400">✓ Mensaje enviado correctamente. Te responderemos pronto.</span>';
      formStatus.classList.remove("hidden");

      // Limpiar formulario
      form.reset();
    } catch (error) {
      // Mostrar error
      formStatus.innerHTML =
        '<span class="text-red-400">✗ Error al enviar el mensaje. Inténtalo de nuevo.</span>';
      formStatus.classList.remove("hidden");
    } finally {
      // Restaurar botón
      submitButton.disabled = false;
      submitText.textContent = "Enviar mensaje";
    }
  });
</script>

<style>
  details summary {
    list-style: none;
    position: relative;
    padding-right: 1.5rem;
  }

  details summary::-webkit-details-marker {
    display: none;
  }

  details summary::after {
    content: "+";
    position: absolute;
    right: 0;
    top: 0;
    font-size: 1.2rem;
    transition: transform 0.2s;
  }

  details[open] summary::after {
    transform: rotate(45deg);
  }
</style>
